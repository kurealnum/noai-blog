import{U as C,J as E,r as a,V as F,g as N,K as B,W as I,j as e,X as H,Y as D,C as L,Z as z,_ as T}from"./index-BFq9amJe.js";import{P as A}from"./Profile-DKl93URn.js";import{p as r}from"./purify.es-Bq0E5Q3l.js";import{S as x,A as j}from"./Snackbar-CNrSt94i.js";import"./createSvgIcon-D1jOfcbH.js";import"./useSlotProps-rhNzl1wG.js";function W(){const{username:n}=C(),h=E("root"),[t,w]=a.useState({}),[i,y]=a.useState([]),[u,S]=a.useState([]),[P,k]=a.useState(!1),[m,l]=a.useState(!1),[v,c]=a.useState(!1),[U,d]=a.useState(!1),p=(s,o)=>{o!=="clickaway"&&c(!1)},g=(s,o)=>{o!=="clickaway"&&d(!1)};a.useEffect(()=>{F(n).then(s=>{w(s),s!=null&&k(!0)}),N(n).then(s=>{y(s)}),B(n).then(s=>{S(s),document.title="NoAI Blog - "+n}),I(n).then(s=>{l(!!s)})},[n]);function _(){h.username!=null&&h.username!==t.username&&z(n).then(s=>{s?(l(!0),d(!0)):(l(!1),c(!0))})}function b(){T(n).then(s=>{s?(l(!1),d(!0)):(l(!0),c(!0))})}if(P){const s={"@context":"https://schema.org","@type":"ProfilePage",dateCreated:t.created_date,dateModified:t.updated_date,mainEntity:{"@type":"Person",name:r.sanitize(t.first_name+" "+t.last_name),alternateName:r.sanitize(t.username),description:r.sanitize(t.about_me),image:r.sanitize(t.profile_picture)}};return e.jsxs(e.Fragment,{children:[e.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),e.jsxs("div",{id:"homepage",children:[e.jsx(H,{type:"user",isFlaggedParam:t.flagged,content:t}),e.jsxs("div",{className:"user-box",children:[e.jsx(A,{content:{user:t}}),e.jsx("button",{type:"button",onClick:m?()=>b():()=>_(),id:"follow",children:m?"Unfollow":"Follow"})]}),e.jsxs("div",{className:"general-info",children:[e.jsx("p",{children:t.about_me}),e.jsx("p",{children:t.technical_info})]}),e.jsxs("div",{className:"extra-info",children:[e.jsx("h2",{children:"Links"}),e.jsx("ul",{className:"links",children:u===null||u.length===0?e.jsx("p",{children:"This user doesn't have any links!"}):u.map((o,f)=>e.jsx("li",{children:e.jsx("a",{href:o.link,children:o.name})},f))}),e.jsx("h2",{children:"Blog Posts"}),e.jsx("ul",{className:"feed",children:i===null||i.length===0?e.jsx("p",{children:"There's nothing here!"}):i.map((o,f)=>e.jsx(D,{content:o},f))})]}),e.jsx(x,{open:v,autoHideDuration:5e3,onClose:p,children:e.jsx(j,{onClose:p,severity:"error",variant:"filled","data-testid":"failure-alert",children:"Something went wrong!"})}),e.jsx(x,{open:U,autoHideDuration:5e3,onClose:g,children:e.jsx(j,{"data-testid":"success-alert",onClose:g,severity:"success",variant:"filled",children:"Operation successfull!"})})]})]})}else return e.jsx(L,{sx:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",margin:"auto"}})}export{W as default};
