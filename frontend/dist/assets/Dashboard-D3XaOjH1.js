import{r as c,j as s,s as m,L as d,d as g,u as N,g as b,a as k,l as w}from"./index-8BmAB2w1.js";import{E as C}from"./Edit-GfyjZ30b.js";import{D as v}from"./Delete-BrlFyoI9.js";import{D}from"./Dialog-LhBLWPOI.js";import"./createSvgIcon-DmniPV4F.js";import"./utils-BYiJXk_u.js";import"./useSlot-BIdqWuUJ.js";import"./useForkRef-BZEACxkh.js";import"./Fade-BKjGMvcR.js";import"./useId-DxmEz8ry.js";function y({title:t,username:l,createdDate:n,content:i,editHelper:h,index:r,posts:e,setPosts:o}){const[u,a]=c.useState(!1);function x(){g(m(t)).then(j=>{if(j){const f=e.slice(0,r).concat(e.slice(r+1));o(f),a(!1)}a(!1)})}function p(){a(!1)}return s.jsxs("li",{className:"blog-post",children:[s.jsxs("div",{className:"edit-buttons",children:[" ",s.jsx("button",{onClick:()=>h(m(t)),children:s.jsx(C,{})}),s.jsx("button",{onClick:()=>a(!0),children:s.jsx(v,{})}),s.jsxs(D,{open:u,className:"delete-post-confirm",onClose:p,children:[s.jsx("h1",{children:"This will delete your post forever! Are you sure?"}),s.jsx("button",{onClick:()=>x(),className:"accent-border",children:"Yes, I am sure"}),s.jsx("button",{onClick:p,className:"tertiary-border",children:"No, I'm not"})]})]}),s.jsx(d,{to:"/post/"+l+"/"+m(t)+"/",children:s.jsx("h2",{children:t})}),s.jsxs("div",{className:"info",children:[s.jsx("p",{children:"By "+l}),s.jsx("p",{children:n.replace(/(T.*)/g,"")})]}),s.jsx("p",{className:"hint","data-testid":"post-content",children:i.length>100?i.slice(0,101)+"...":i})]})}function V(){const[t,l]=c.useState([]),[n,i]=c.useState([]),h=N();c.useEffect(()=>{b().then(e=>{l(e)}),k().then(e=>{i(e)})},[]);function r(e){h("/edit-post/"+e)}return s.jsxs("div",{id:"dashboard",children:[s.jsxs("section",{className:"flex-row-spacing vertical-margin-50",children:[s.jsx(d,{to:"/followers",className:"link-button",children:"View followers"}),s.jsx(d,{to:"/following",className:"link-button",children:"View following"})]}),s.jsxs("section",{className:"list-section",children:[s.jsx("h1",{children:"Your comments"}),s.jsx("ul",{className:"list",children:n===null||n.length===0?s.jsx("p",{role:"progressbar",children:"There's nothing here. Go make some comments!"}):n.map((e,o)=>s.jsx("li",{className:"comment",children:s.jsx(d,{to:"/post/"+e.post.user.username+"/"+m(e.post.title),"data-testid":"comment-content",children:w(e.content)})},o))})]}),s.jsxs("section",{className:"list-section",children:[" ",s.jsx("h1",{children:"Your posts"}),s.jsx("ul",{className:"list",children:t.length===null||t.length===0?s.jsx("p",{role:"progressbar",children:"There's nothing here. Go make some posts!"}):t.map((e,o)=>s.jsx(y,{title:e.title,username:e.user.username,createdDate:e.created_date,content:e.content,editHelper:r,posts:t,setPosts:l,index:o},o))})]})]})}export{V as default};
