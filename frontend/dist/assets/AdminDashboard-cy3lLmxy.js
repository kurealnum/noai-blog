var U=t=>{throw TypeError(t)};var H=(t,e,s)=>e.has(t)||U("Cannot "+s);var i=(t,e,s)=>(H(t,e,"read from private field"),s?s.call(t):e.get(t)),O=(t,e,s)=>e.has(t)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),p=(t,e,s,r)=>(H(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),R=(t,e,s)=>(H(t,e,"access private method"),s);import{aN as N,aO as M,aP as T,aQ as z,aR as V,aS as X,aT as Y,r as j,aU as Z,aV as $,aW as G,aX as k,aY as L,aZ as J,a_ as W,j as v,a5 as ee,a$ as se,b0 as te,b1 as re}from"./index-DKk1ud7V.js";import{C as ie}from"./Comment-C6TtYw-U.js";import{P as ne}from"./Profile-CkRkhkQF.js";import"./Close-B0gtHYqH.js";import"./Edit-BffhDzxN.js";import"./createSvgIcon-oIZgzdYy.js";import"./useControlled-gQzRRs2I.js";function _(t,e){return t.filter(s=>!e.includes(s))}function ae(t,e,s){const r=t.slice(0);return r[e]=s,r}var E,m,q,d,C,P,S,f,I,A,F,B,K,ue=(K=class extends N{constructor(e,s,r){super();O(this,f);O(this,E);O(this,m);O(this,q);O(this,d);O(this,C);O(this,P);O(this,S);p(this,E,e),p(this,q,[]),p(this,d,[]),p(this,m,[]),this.setQueries(s)}onSubscribe(){this.listeners.size===1&&i(this,d).forEach(e=>{e.subscribe(s=>{R(this,f,F).call(this,e,s)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,i(this,d).forEach(e=>{e.destroy()})}setQueries(e,s,r){p(this,q,e),M.batch(()=>{const n=i(this,d),a=R(this,f,A).call(this,i(this,q));a.forEach(o=>o.observer.setOptions(o.defaultedQueryOptions,r));const u=a.map(o=>o.observer),l=u.map(o=>o.getCurrentResult()),g=u.some((o,x)=>o!==n[x]);n.length===u.length&&!g||(p(this,d,u),p(this,m,l),this.hasListeners()&&(_(n,u).forEach(o=>{o.destroy()}),_(u,n).forEach(o=>{o.subscribe(x=>{R(this,f,F).call(this,o,x)})}),R(this,f,B).call(this)))})}getCurrentResult(){return i(this,m)}getQueries(){return i(this,d).map(e=>e.getCurrentQuery())}getObservers(){return i(this,d)}getOptimisticResult(e,s){const r=R(this,f,A).call(this,e),n=r.map(a=>a.observer.getOptimisticResult(a.defaultedQueryOptions));return[n,a=>R(this,f,I).call(this,a??n,s),()=>r.map((a,u)=>{const l=n[u];return a.defaultedQueryOptions.notifyOnChangeProps?l:a.observer.trackResult(l,g=>{r.forEach(o=>{o.observer.trackProp(g)})})})]}},E=new WeakMap,m=new WeakMap,q=new WeakMap,d=new WeakMap,C=new WeakMap,P=new WeakMap,S=new WeakMap,f=new WeakSet,I=function(e,s){return s?((!i(this,C)||i(this,m)!==i(this,S)||s!==i(this,P))&&(p(this,P,s),p(this,S,i(this,m)),p(this,C,T(i(this,C),s(e)))),i(this,C)):e},A=function(e){const s=i(this,d),r=new Map(s.map(c=>[c.options.queryHash,c])),n=e.map(c=>i(this,E).defaultQueryOptions(c)),a=n.flatMap(c=>{const y=r.get(c.queryHash);return y!=null?[{defaultedQueryOptions:c,observer:y}]:[]}),u=new Set(a.map(c=>c.defaultedQueryOptions.queryHash)),l=n.filter(c=>!u.has(c.queryHash)),g=c=>{const y=i(this,E).defaultQueryOptions(c);return i(this,d).find(h=>h.options.queryHash===y.queryHash)??new z(i(this,E),y)},o=l.map(c=>({defaultedQueryOptions:c,observer:g(c)})),x=(c,y)=>n.indexOf(c.defaultedQueryOptions)-n.indexOf(y.defaultedQueryOptions);return a.concat(o).sort(x)},F=function(e,s){const r=i(this,d).indexOf(e);r!==-1&&(p(this,m,ae(i(this,m),r,s)),R(this,f,B).call(this))},B=function(){M.batch(()=>{this.listeners.forEach(e=>{e(i(this,m))})})},K);function oe({queries:t,...e},s){const r=V(),n=X(),a=Y(),u=j.useMemo(()=>t.map(h=>{const Q=r.defaultQueryOptions(h);return Q._optimisticResults=n?"isRestoring":"optimistic",Q}),[t,r,n]);u.forEach(h=>{Z(h),$(h,a)}),G(a);const[l]=j.useState(()=>new ue(r,u,e)),[g,o,x]=l.getOptimisticResult(u,e.combine);j.useSyncExternalStore(j.useCallback(h=>n?()=>{}:l.subscribe(M.batchCalls(h)),[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),j.useEffect(()=>{l.setQueries(u,e,{listeners:!1})},[u,e,l]);const y=g.some((h,Q)=>k(u[Q],h))?g.flatMap((h,Q)=>{const b=u[Q];if(b){const D=new z(r,b);if(k(b,h))return L(b,D,a);J(h,n)&&L(b,D,a)}return[]}):[];if(y.length>0)throw Promise.all(y);const w=g.find((h,Q)=>{const b=u[Q];return b&&W({result:h,errorResetBoundary:a,throwOnError:b.throwOnError,query:r.getQueryCache().get(b.queryHash)})});if(w!=null&&w.error)throw w.error;return o(x())}function ge(){const t=oe({queries:[{queryKey:["flaggedPosts"],queryFn:se},{queryKey:["flaggedComments"],queryFn:te},{queryKey:["flaggedUsers"],queryFn:re}]});if(!t.every(e=>e.isLoading)){if(t.every(e=>e.isError))return v.jsx("div",{id:"error-page",children:t.map((e,s)=>{e.error})});if(t.every(e=>e.isSuccess))return v.jsxs("div",{className:"flex-row-spacing",children:[v.jsx("ul",{id:"flagged-posts",children:t[0].data.map((e,s)=>v.jsx(ee,{content:e,isAdminDashboard:!0,refetch:t[0].refetch},s))}),v.jsx("ul",{id:"flagged-comments",children:t[1].data.map((e,s)=>v.jsx(ie,{content:e,isAdminDashboard:!0,refetch:t[1].refetch},s))}),v.jsx("ul",{id:"flagged-users",children:t[2].data.map((e,s)=>v.jsx(ne,{content:{user:e},isAdminDashboard:!0,refetch:t[2].refetch},s))})]})}}export{ge as default};
