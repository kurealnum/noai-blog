import{j as e,a2 as I,e as _,r as l,f as u,a3 as N,h as q,a4 as C,a5 as y,a6 as E,a7 as L,g as w,a8 as U,Y as z}from"./index-DtToE0z2.js";import{P as H}from"./Profile-CeTSLVzl.js";import{p as o}from"./purify.es-Bq0E5Q3l.js";import{S,A as b}from"./Snackbar-PYrBlNSA.js";import"./createSvgIcon-CkggMASU.js";import"./useControlled-Bj124hHm.js";import"./ButtonBase-CiRgYZlD.js";import"./Grow-SGu0mAim.js";function B(){return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Something went wrong!"}),e.jsxs("p",{children:["If you believe this to be an issue on our end, please feel free to open an issue ",e.jsx("a",{href:"https://github.com/kurealnum/byeAI/issues",children:"here."})]})]})}function J(){const{username:a}=I(),h=_("root"),[m,r]=l.useState(!1),[F,c]=l.useState(!1),[P,d]=l.useState(!1),p=u({queryKey:["blogPosts",a],queryFn:()=>w(a,"blogPost")}),x=u({queryKey:["lists",a],queryFn:()=>w(a,"list")}),s=u({queryKey:["userInfo",a],queryFn:()=>U(a)}),f=u({queryKey:["links",a],queryFn:()=>z(a)}),g=(n,t)=>{t!=="clickaway"&&c(!1)},j=(n,t)=>{t!=="clickaway"&&d(!1)};function k(){h.username!=null&&h.username!==s.data.username&&E(a).then(n=>{n?(r(!0),d(!0)):(r(!1),c(!0))})}function v(){L(a).then(n=>{n?(r(!1),d(!0)):(r(!0),c(!0))})}if(l.useEffect(()=>{N(a).then(n=>{r(!!n)})},[a]),s.isPending)return e.jsx(q,{});if(s.isSuccess){document.title="NoAI Blog - "+a;const n={"@context":"https://schema.org","@type":"ProfilePage",dateCreated:s.data.created_date,dateModified:s.data.updated_date,mainEntity:{"@type":"Person",name:o.sanitize(s.data.first_name+" "+s.data.last_name),alternateName:o.sanitize(s.data.username),description:o.sanitize(s.data.about_me),image:o.sanitize(s.data.profile_picture)}};return e.jsxs(e.Fragment,{children:[e.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(n)}}),e.jsxs("div",{id:"homepage",children:[e.jsx(C,{type:"user",isFlaggedParam:s.data.flagged,content:s.data}),e.jsxs("div",{className:"user-box",children:[e.jsx(H,{content:{user:s.data}}),e.jsx("button",{type:"button",onClick:m?()=>v():()=>k(),id:"follow",children:m?"Unfollow":"Follow"})]}),e.jsxs("div",{className:"general-info",children:[e.jsx("p",{children:s.data.about_me}),e.jsx("p",{children:s.data.technical_info})]}),e.jsxs("div",{className:"extra-info",children:[e.jsx("h2",{children:"Links"}),e.jsx("ul",{className:"links",children:f.data===null||f.data.length===0?e.jsx("p",{children:"This user doesn't have any links!"}):f.data.map((t,i)=>e.jsx("li",{children:e.jsx("a",{href:o.sanitize(t.link),children:o.sanitize(t.name)})},i))}),e.jsx("h2",{children:"Blog Posts"}),e.jsx("ul",{className:"feed",children:p.isSuccess?p.data.map((t,i)=>e.jsx(y,{content:t},i)):e.jsx("p",{children:"There's nothing here!"})}),e.jsx("h2",{children:"Lists"}),e.jsx("ul",{className:"feed",children:x.isSuccess?x.data.map((t,i)=>e.jsx(y,{content:t},i)):e.jsx("p",{children:"There's nothing here!"})})]}),e.jsx(S,{open:F,autoHideDuration:5e3,onClose:g,children:e.jsx(b,{onClose:g,severity:"error",variant:"filled","data-testid":"failure-alert",children:"Something went wrong!"})}),e.jsx(S,{open:P,autoHideDuration:5e3,onClose:j,children:e.jsx(b,{"data-testid":"success-alert",onClose:j,severity:"success",variant:"filled",children:"Operation successfull!"})})]})]})}else return e.jsx(B,{})}export{J as default};
