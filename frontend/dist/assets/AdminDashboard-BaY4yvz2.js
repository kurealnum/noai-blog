var k=t=>{throw TypeError(t)};var H=(t,e,s)=>e.has(t)||k("Cannot "+s);var i=(t,e,s)=>(H(t,e,"read from private field"),s?s.call(t):e.get(t)),O=(t,e,s)=>e.has(t)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),p=(t,e,s,r)=>(H(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),R=(t,e,s)=>(H(t,e,"access private method"),s);import{ad as N,ac as M,ae as T,ab as G,r as j,j as v,af as J,ag as V,ah as X}from"./index-Dug6zu63.js";import{Q as z,u as Y,a as Z,e as $,b as W,c as ee,s as L,f as U,w as se,g as te}from"./suspense-D3n3xVE8.js";import{B as re}from"./BlogPostThumbnail-ztuZlL1x.js";import{C as ie}from"./Comment-DTp3ryTA.js";import{P as ne}from"./Profile-BfnJrNlo.js";import"./utils-km2FGkQ4.js";import"./FlagButton-CtyI85nY.js";import"./createSvgIcon-DuNM5a2L.js";import"./useMutation-B1z-pseZ.js";import"./Thumbnail-BE1-_kcj.js";import"./Delete-D8Q_e9ro.js";import"./Dialog-DbX5epst.js";import"./utils-BayhJZdW.js";import"./useSlot-DrbMh9Oq.js";import"./useForkRef-BBqDKDbE.js";import"./Fade-DPRUuxNv.js";import"./useId-CBCYSj5d.js";import"./Close-DNs_MSt1.js";import"./Edit-A29x9a9c.js";function K(t,e){return t.filter(s=>!e.includes(s))}function oe(t,e,s){const r=t.slice(0);return r[e]=s,r}var E,m,q,d,C,P,S,f,I,A,B,F,_,ue=(_=class extends N{constructor(e,s,r){super();O(this,f);O(this,E);O(this,m);O(this,q);O(this,d);O(this,C);O(this,P);O(this,S);p(this,E,e),p(this,q,[]),p(this,d,[]),p(this,m,[]),this.setQueries(s)}onSubscribe(){this.listeners.size===1&&i(this,d).forEach(e=>{e.subscribe(s=>{R(this,f,B).call(this,e,s)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,i(this,d).forEach(e=>{e.destroy()})}setQueries(e,s,r){p(this,q,e),M.batch(()=>{const n=i(this,d),o=R(this,f,A).call(this,i(this,q));o.forEach(a=>a.observer.setOptions(a.defaultedQueryOptions,r));const u=o.map(a=>a.observer),l=u.map(a=>a.getCurrentResult()),y=u.some((a,x)=>a!==n[x]);n.length===u.length&&!y||(p(this,d,u),p(this,m,l),this.hasListeners()&&(K(n,u).forEach(a=>{a.destroy()}),K(u,n).forEach(a=>{a.subscribe(x=>{R(this,f,B).call(this,a,x)})}),R(this,f,F).call(this)))})}getCurrentResult(){return i(this,m)}getQueries(){return i(this,d).map(e=>e.getCurrentQuery())}getObservers(){return i(this,d)}getOptimisticResult(e,s){const r=R(this,f,A).call(this,e),n=r.map(o=>o.observer.getOptimisticResult(o.defaultedQueryOptions));return[n,o=>R(this,f,I).call(this,o??n,s),()=>r.map((o,u)=>{const l=n[u];return o.defaultedQueryOptions.notifyOnChangeProps?l:o.observer.trackResult(l,y=>{r.forEach(a=>{a.observer.trackProp(y)})})})]}},E=new WeakMap,m=new WeakMap,q=new WeakMap,d=new WeakMap,C=new WeakMap,P=new WeakMap,S=new WeakMap,f=new WeakSet,I=function(e,s){return s?((!i(this,C)||i(this,m)!==i(this,S)||s!==i(this,P))&&(p(this,P,s),p(this,S,i(this,m)),p(this,C,T(i(this,C),s(e)))),i(this,C)):e},A=function(e){const s=i(this,d),r=new Map(s.map(c=>[c.options.queryHash,c])),n=e.map(c=>i(this,E).defaultQueryOptions(c)),o=n.flatMap(c=>{const g=r.get(c.queryHash);return g!=null?[{defaultedQueryOptions:c,observer:g}]:[]}),u=new Set(o.map(c=>c.defaultedQueryOptions.queryHash)),l=n.filter(c=>!u.has(c.queryHash)),y=c=>{const g=i(this,E).defaultQueryOptions(c);return i(this,d).find(h=>h.options.queryHash===g.queryHash)??new z(i(this,E),g)},a=l.map(c=>({defaultedQueryOptions:c,observer:y(c)})),x=(c,g)=>n.indexOf(c.defaultedQueryOptions)-n.indexOf(g.defaultedQueryOptions);return o.concat(a).sort(x)},B=function(e,s){const r=i(this,d).indexOf(e);r!==-1&&(p(this,m,oe(i(this,m),r,s)),R(this,f,F).call(this))},F=function(){M.batch(()=>{this.listeners.forEach(e=>{e(i(this,m))})})},_);function ae({queries:t,...e},s){const r=G(),n=Y(),o=Z(),u=j.useMemo(()=>t.map(h=>{const Q=r.defaultQueryOptions(h);return Q._optimisticResults=n?"isRestoring":"optimistic",Q}),[t,r,n]);u.forEach(h=>{$(h),W(h,o)}),ee(o);const[l]=j.useState(()=>new ue(r,u,e)),[y,a,x]=l.getOptimisticResult(u,e.combine);j.useSyncExternalStore(j.useCallback(h=>n?()=>{}:l.subscribe(M.batchCalls(h)),[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),j.useEffect(()=>{l.setQueries(u,e,{listeners:!1})},[u,e,l]);const g=y.some((h,Q)=>L(u[Q],h))?y.flatMap((h,Q)=>{const b=u[Q];if(b){const D=new z(r,b);if(L(b,h))return U(b,D,o);se(h,n)&&U(b,D,o)}return[]}):[];if(g.length>0)throw Promise.all(g);const w=y.find((h,Q)=>{const b=u[Q];return b&&te({result:h,errorResetBoundary:o,throwOnError:b.throwOnError,query:r.getQueryCache().get(b.queryHash)})});if(w!=null&&w.error)throw w.error;return a(x())}function Pe(){const t=ae({queries:[{queryKey:["flaggedPosts"],queryFn:J},{queryKey:["flaggedComments"],queryFn:V},{queryKey:["flaggedUsers"],queryFn:X}]});if(!t.every(e=>e.isLoading)){if(t.every(e=>e.isError))return v.jsx("div",{id:"error-page",children:t.map((e,s)=>{e.error})});if(t.every(e=>e.isSuccess))return v.jsxs("div",{className:"flex-row-spacing",children:[v.jsx("ul",{id:"flagged-posts",children:t[0].data.map((e,s)=>v.jsx(re,{content:e,isAdminDashboard:!0,refetch:t[0].refetch},s))}),v.jsx("ul",{id:"flagged-comments",children:t[1].data.map((e,s)=>v.jsx(ie,{content:e,isAdminDashboard:!0,refetch:t[1].refetch},s))}),v.jsx("ul",{id:"flagged-users",children:t[2].data.map((e,s)=>v.jsx(ne,{content:{user:e},isAdminDashboard:!0,refetch:t[2].refetch},s))})]})}}export{Pe as default};
