import{j as e,x as B,r as n,u as J,y as S,O as Y,C as K,z as Q,A as W,B as X,D as Z}from"./index-BeUNFAff.js";import{r as $,i as ee}from"./createSvgIcon-DWnuzTKb.js";import{E as te}from"./ErrorMessage-DUQhSQrf.js";import{D as se,M as ae}from"./Dialog-DnFiJzH4.js";import{c as ne}from"./createSvgIcon-BuhX_vZg.js";import{C as le}from"./Close-Da5akRZq.js";import{S as w,A as L}from"./Snackbar-Du0snsg0.js";import"./useId-CVjNXGpa.js";import"./useForkRef-BsPCRZOl.js";import"./utils-M2d1AFFH.js";import"./useSlot-b_M0aM21.js";import"./Fade-DjRqLJJx.js";import"./useSlotProps-e4lAivXa.js";const ie=ne(e.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");var p={},re=ee;Object.defineProperty(p,"__esModule",{value:!0});var _=p.default=void 0,oe=re($()),ce=e;_=p.default=(0,oe.default)((0,ce.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function me({toCallFunction:m,message:a,isOpen:d,toCallArgs:l}){return e.jsxs(se,{open:d,children:[e.jsx("h2",{children:"Hey!"}),e.jsx("p",{children:a}),e.jsx("button",{onClick:()=>m(...l),children:"Are you sure?"})]})}function Se(){const m=B("root"),[a,d]=n.useState(m),[l,c]=n.useState([]),[f,y]=n.useState({}),[D,o]=n.useState(!1),[H,P]=n.useState(),[M,u]=n.useState(!1),[x,A]=n.useState(!1),[j,E]=n.useState(!0),F=J(),[O,g]=n.useState(!1),[I,h]=n.useState(!1);n.useEffect(()=>{S().then(t=>{c(t)})},[]);const V=()=>u(!0),v=()=>{u(!1),g(!1)};function r(t){d({...a,[t.target.name]:t.target.value})}function T(t){P({[t.target.name]:t.target.files[0]})}function b(t){y({...f,[t.target.name]:t.target.value})}function k(t,s){const i=l;i[s]={...l[s],[t.target.name]:t.target.value},c(i)}function z(t){const s=l.filter((i,G)=>G!==t);c(s),Q(l[t]).then(i=>{i.ok&&o(!0)})}function R(){l.length==5?g(!0):W(f).then(t=>{t&&S().then(s=>{c(s),o(!0),u(!1)})})}const N=(t,s)=>{s!=="clickaway"&&h(!1)},C=(t,s)=>{s!=="clickaway"&&o(!1)};function U(t){t.preventDefault(),X(a,h,o,l,H).then(s=>{s?o(!0):h(!0)})}function q(){Z()&&F("/login")}return a!=null&&l!=null?e.jsxs("div",{className:"filler-wrapper",children:[e.jsx("h1",{children:"Settings"}),e.jsxs("form",{className:"custom-form","aria-label":"Settings",id:"settings",encType:"multipart/form-data",method:"POST",onSubmit:t=>U(t),children:[e.jsxs("fieldset",{children:[e.jsx("legend",{children:"User information"}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{name:"username",id:"username",onChange:t=>r(t),value:a.username,maxLength:150})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",name:"email",onChange:t=>r(t),value:a.email,maxLength:200})]}),e.jsx("button",{className:"form-button",children:e.jsx("a",{href:"/manage-password/change-password/",children:"Change password"})})]}),e.jsxs("fieldset",{className:"orange-border",children:[e.jsx("legend",{children:"Danger zone"}),e.jsxs("div",{className:"spacing-wrapper delete-wrapper",children:[j?e.jsx("button",{disabled:!0,type:"button",children:"Delete Account"}):e.jsx("button",{type:"button",onClick:()=>A(!0),children:"Delete Account"}),e.jsx("button",{onClick:()=>E(!j),type:"button",children:e.jsx(ie,{})}),x?e.jsx(me,{toCallFunction:q,message:"Are you sure you want to delete your profile? This will delete it forever (a really long time)!",isOpen:x,toCallArgs:[]}):null]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Personalization"}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"first_name",children:"First name (optional)"}),e.jsx("input",{id:"first_name",name:"first_name",onChange:t=>r(t),value:a.first_name,maxLength:50})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"last_name",children:"Last name (optional)"}),e.jsx("input",{id:"last_name",name:"last_name",onChange:t=>r(t),value:a.last_name,maxLength:50})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"about_me",children:"About me"}),e.jsx("textarea",{id:"about_me",name:"about_me",onChange:t=>r(t),value:a.about_me,maxLength:250})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"technical_info",children:"Technical Info"}),e.jsx("textarea",{id:"technical_info",name:"technical_info",onChange:t=>r(t),value:a.technical_info,maxLength:150})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"profile_picture",children:"Profile Picture (PNG or JPEG)"}),e.jsx("input",{id:"profile_picture",name:"profile_picture",onChange:t=>T(t),type:"file",accept:"image/png, image/jpeg"})]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Links"}),e.jsx("i",{children:e.jsx("p",{children:"All links must be HTTPS. Maximum of 5 links."})}),e.jsx("ul",{className:"links-list",children:l.map((t,s)=>e.jsxs("li",{className:"item link-item",children:[e.jsx("label",{htmlFor:"name",hidden:!0,children:"Name"}),e.jsx("input",{id:"name",defaultValue:t.name,name:"name",onChange:i=>k(i,s)}),e.jsx("p",{children:" - "}),e.jsx("label",{htmlFor:"link",hidden:!0,children:"Link"}),e.jsx("input",{id:"link",name:"link",defaultValue:t.link,onChange:i=>k(i,s)}),e.jsx("button",{type:"button",onClick:()=>z(s),"data-testid":"delete-button",children:e.jsx(_,{})})]},t.name+s))}),e.jsx("div",{className:"margin-wrapper",children:e.jsx("button",{type:"button",onClick:V,"data-testid":"modal-open",className:"special-button",children:"Add link"})})]}),e.jsx(ae,{open:M,onClose:v,children:e.jsxs("div",{className:"modal custom-form",children:[e.jsx("button",{className:"icon-button",onClick:v,children:e.jsx(le,{})}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"name",children:"New Name"}),e.jsx("input",{id:"name",name:"name",defaultValue:"Name",onChange:t=>b(t)})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"link",children:"Link"}),e.jsx("input",{id:"link",name:"link",defaultValue:"Link",onChange:t=>b(t)})]}),e.jsx("button",{id:"save",onClick:()=>R(),"data-testid":"link-save",type:"submit",children:"Save"}),e.jsx(te,{message:"Maximum of 5 links",isError:O})]})}),e.jsx("button",{"data-testid":"form-save",id:"save",type:"submit",children:"Save"})]}),e.jsx(w,{open:I,autoHideDuration:5e3,onClose:N,children:e.jsx(L,{onClose:N,severity:"error",variant:"filled",className:"error-mui-alert",children:"Something went wrong!"})}),e.jsx(w,{open:D,autoHideDuration:5e3,onClose:C,children:e.jsx(L,{className:"general-mui-alert","data-testid":"saved-alert",onClose:C,severity:"success",variant:"filled",children:"Your changes were successfully saved!"})}),e.jsx(Y,{}),e.jsx("div",{className:"filler"})]}):e.jsxs("div",{id:"settings",children:[e.jsx(K,{sx:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",margin:"auto"}}),";"]})}export{Se as default};
