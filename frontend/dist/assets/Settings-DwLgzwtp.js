import{v as J,j as e,c as W,r as a,a as X,X as C,Y as Z,W as $,C as B,Z as K,_ as Q,$ as ee,a0 as te}from"./index-BL4B0tWW.js";import{r as se,i as ae}from"./createSvgIcon-BF2df4O6.js";import{E as ne}from"./ErrorMessage-C3hzXIrc.js";import{C as le}from"./ConfirmationModal-wOkbEqns.js";import{C as ie}from"./Close-KK7v3Dbg.js";import{S,A as w}from"./Snackbar-DX4nIHkr.js";import"./useControlled-B36T2muE.js";import"./ButtonBase-AKfuyYGG.js";import"./Grow-DBu4-GCN.js";const re=J(e.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");var h={},oe=ae;Object.defineProperty(h,"__esModule",{value:!0});var L=h.default=void 0,ce=oe(se()),de=e;L=h.default=(0,ce.default)((0,de.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function be(){const _=W("root"),[n,D]=a.useState(_),[i,c]=a.useState([]),[f,y]=a.useState({}),[P,o]=a.useState(!1),[H,M]=a.useState(),[E,d]=a.useState(!1),[m,p]=a.useState(!1),[x,F]=a.useState(!0),O=X(),[A,j]=a.useState(!1),[I,u]=a.useState(!1);a.useEffect(()=>{C().then(t=>{c(t)})},[]);const V=()=>d(!0),g=()=>{d(!1),j(!1)};function r(t){D({...n,[t.target.name]:t.target.value})}function T(t){M({[t.target.name]:t.target.files[0]})}function v(t){y({...f,[t.target.name]:t.target.value})}function b(t,s){const l=i;l[s]={...i[s],[t.target.name]:t.target.value},c(l)}function z(t){const s=i.filter((l,Y)=>Y!==t);c(s),K(i[t]).then(l=>{l.ok&&o(!0)})}function R(){i.length==5?j(!0):Q(f).then(t=>{t&&C().then(s=>{c(s),o(!0),d(!1)})})}const k=(t,s)=>{s!=="clickaway"&&u(!1)},N=(t,s)=>{s!=="clickaway"&&o(!1)};function U(t){t.preventDefault(),ee(n,u,o,i,H).then(s=>{s?o(!0):u(!0)})}function q(){te().then(t=>{t&&O("/login")})}function G(){p(!m)}return n!=null&&i!=null?e.jsxs("div",{className:"filler-wrapper",children:[e.jsx("h1",{children:"Settings"}),e.jsxs("form",{className:"custom-form","aria-label":"Settings",id:"settings",encType:"multipart/form-data",method:"POST",onSubmit:t=>U(t),children:[e.jsxs("fieldset",{children:[e.jsx("legend",{children:"User information"}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{name:"username",id:"username",onChange:t=>r(t),value:n.username,maxLength:150})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",name:"email",onChange:t=>r(t),value:n.email,maxLength:200})]}),e.jsx("button",{className:"form-button",children:e.jsx("a",{href:"/manage-password/change-password/",children:"Change password"})})]}),e.jsxs("fieldset",{className:"orange-border",children:[e.jsx("legend",{children:"Danger zone"}),e.jsxs("div",{className:"spacing-wrapper delete-wrapper",children:[x?e.jsx("button",{disabled:!0,type:"button",children:"Delete Account"}):e.jsx("button",{type:"button",onClick:()=>p(!0),children:"Delete Account"}),e.jsx("button",{onClick:()=>F(!x),type:"button",children:e.jsx(re,{})}),m?e.jsx(le,{helperFunction:q,message:"Are you sure you want to delete your profile? This will delete it forever (a really long time)!",isOpen:m,toggleOpen:G}):null]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Personalization"}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"first_name",children:"First name (optional)"}),e.jsx("input",{id:"first_name",name:"first_name",onChange:t=>r(t),value:n.first_name,maxLength:50})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"last_name",children:"Last name (optional)"}),e.jsx("input",{id:"last_name",name:"last_name",onChange:t=>r(t),value:n.last_name,maxLength:50})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"about_me",children:"About me"}),e.jsx("textarea",{id:"about_me",name:"about_me",onChange:t=>r(t),value:n.about_me,maxLength:250})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"technical_info",children:"Technical Info"}),e.jsx("textarea",{id:"technical_info",name:"technical_info",onChange:t=>r(t),value:n.technical_info,maxLength:150})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"profile_picture",children:"Profile Picture (PNG or JPEG)"}),e.jsx("input",{id:"profile_picture",name:"profile_picture",onChange:t=>T(t),type:"file",accept:"image/png, image/jpeg"})]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Links"}),e.jsx("i",{children:e.jsx("p",{children:"All links must be HTTPS. Maximum of 5 links."})}),e.jsx("ul",{className:"links-list",children:i.map((t,s)=>e.jsxs("li",{className:"item link-item",children:[e.jsx("label",{htmlFor:"name",hidden:!0,children:"Name"}),e.jsx("input",{id:"name",defaultValue:t.name,name:"name",onChange:l=>b(l,s)}),e.jsx("p",{children:" - "}),e.jsx("label",{htmlFor:"link",hidden:!0,children:"Link"}),e.jsx("input",{id:"link",name:"link",defaultValue:t.link,onChange:l=>b(l,s)}),e.jsx("button",{type:"button",onClick:()=>z(s),"data-testid":"delete-button",children:e.jsx(L,{})})]},t.name+s))}),e.jsx("div",{className:"margin-wrapper",children:e.jsx("button",{type:"button",onClick:V,"data-testid":"modal-open",className:"special-button",children:"Add link"})})]}),e.jsx(Z,{open:E,onClose:g,children:e.jsxs("div",{className:"modal custom-form",children:[e.jsx("button",{className:"icon-button",onClick:g,children:e.jsx(ie,{})}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"name",children:"New Name"}),e.jsx("input",{id:"name",name:"name",defaultValue:"Name",onChange:t=>v(t)})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"link",children:"Link"}),e.jsx("input",{id:"link",name:"link",defaultValue:"Link",onChange:t=>v(t)})]}),e.jsx("button",{id:"save",onClick:()=>R(),"data-testid":"link-save",type:"submit",children:"Save"}),e.jsx(ne,{message:"Maximum of 5 links",isError:A})]})}),e.jsx("button",{"data-testid":"form-save",id:"save",type:"submit",children:"Save"})]}),e.jsx(S,{open:I,autoHideDuration:5e3,onClose:k,children:e.jsx(w,{onClose:k,severity:"error",variant:"filled",className:"error-mui-alert",children:"Something went wrong!"})}),e.jsx(S,{open:P,autoHideDuration:5e3,onClose:N,children:e.jsx(w,{className:"general-mui-alert","data-testid":"saved-alert",onClose:N,severity:"success",variant:"filled",children:"Your changes were successfully saved!"})}),e.jsx($,{}),e.jsx("div",{className:"filler"})]}):e.jsxs("div",{id:"settings",children:[e.jsx(B,{sx:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",margin:"auto"}}),";"]})}export{be as default};
