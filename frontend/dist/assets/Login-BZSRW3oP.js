import{u as h,r as t,a as f,j as s,C as j,L as b}from"./index-ByBVn0Oy.js";import{l as v}from"./auth-COF5vbzH.js";import{E as L}from"./ErrorMessage-Croxrn5I.js";import{V as w,a as N}from"./VisibilityOff-dC0M8LZb.js";function F(){const{state:i}=h(),[r,m]=t.useState({username:"",password:""}),o=f(),[c,u]=t.useState(!1),[a,d]=t.useState(!1),[g,n]=t.useState(!1),l=e=>m({...r,[e.target.name]:e.target.value});function p(e){e.preventDefault(),n(!0),v(r).then(x=>{x?i!=null?o(i.redirectTo.pathname):o("/login-redirect"):u(!0),n(!1)})}return g?s.jsx(j,{sx:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",margin:"auto"}}):s.jsxs("div",{className:"custom-form",id:"login",children:[s.jsxs("form",{onSubmit:e=>p(e),"aria-label":"Log in",children:[s.jsxs("div",{className:"item",children:[s.jsx("label",{htmlFor:"username",children:"Username"}),s.jsx("input",{id:"username",name:"username",onChange:e=>l(e)})]}),s.jsxs("div",{className:"item",children:[s.jsx("label",{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"password",children:[s.jsx("input",{id:"password",name:"password",type:a?"text":"password",onChange:e=>l(e),maxLength:128}),s.jsx("button",{id:"toggle-visibility",type:"button",className:"icon-button",onClick:()=>d(!a),children:a?s.jsx(w,{}):s.jsx(N,{})})]})]}),s.jsx("button",{type:"submit","data-testid":"login",children:"Login"}),s.jsxs("p",{children:["Or"," ",s.jsx(b,{to:"/register",className:"accent-highlight",children:"register"})]})]}),s.jsx(L,{isError:c,message:"Username or password is incorrect"})]})}export{F as default};
