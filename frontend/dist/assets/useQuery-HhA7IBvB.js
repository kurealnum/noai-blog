import{u as R,a as b,e as d,b as m,c as O,s as h,f as C,g as Q,Q as E}from"./suspense-21-HPQhx.js";import{aa as q,r as a,ab as w}from"./index-Dxgc9yJU.js";function x(i,c,B){var n,y,o,f;const s=q(),l=R(),u=b(),e=s.defaultQueryOptions(i);(y=(n=s.getDefaultOptions().queries)==null?void 0:n._experimental_beforeQuery)==null||y.call(n,e),e._optimisticResults=l?"isRestoring":"optimistic",d(e),m(e,u),O(u);const[r]=a.useState(()=>new c(s,e)),t=r.getOptimisticResult(e);if(a.useSyncExternalStore(a.useCallback(p=>{const g=l?()=>{}:r.subscribe(w.batchCalls(p));return r.updateResult(),g},[r,l]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a.useEffect(()=>{r.setOptions(e,{listeners:!1})},[e,r]),h(e,t))throw C(e,r,u);if(Q({result:t,errorResetBoundary:u,throwOnError:e.throwOnError,query:s.getQueryCache().get(e.queryHash)}))throw t.error;return(f=(o=s.getDefaultOptions().queries)==null?void 0:o._experimental_afterQuery)==null||f.call(o,e,t),e.notifyOnChangeProps?t:r.trackResult(t)}function v(i,c){return x(i,E)}export{v as u};
