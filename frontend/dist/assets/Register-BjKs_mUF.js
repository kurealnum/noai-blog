import{r as l,u as j,j as e,N as p,C as f,L as b,n as d}from"./index-YEr_JHM6.js";import{u as v}from"./useMutation-DHSfzD65.js";import{V as N,a as C}from"./VisibilityOff-BAJi9OIA.js";import{S as F,A as L}from"./Snackbar-xwVeJT2l.js";import"./utils-km2FGkQ4.js";import"./createSvgIcon-DkCOBuqo.js";import"./useSlot-C_ZUbik9.js";import"./utils-Bpmz3EBa.js";import"./useForkRef-CFosJHO8.js";import"./useSlotProps-BkGLPs8K.js";function A(){const[o,h]=l.useState(),g=j(),[u,i]=l.useState(!1),[n,x]=l.useState(!1),a=s=>h({...o,[s.target.name]:s.target.value}),t=v({mutationFn:s=>c(s)}),m=(s,r)=>{r!=="clickaway"&&i(!1)};function c(s){if(s.preventDefault(),d.language!=null)throw Error;d(o).then(r=>{r?g("/login"):i(!0)})}if(t.isSuccess)return e.jsx(p,{to:"/login"});if(t.isError&&i(!0),t.isPending)return e.jsx(f,{sx:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",margin:"auto"}});if(t.isIdle||t.isError)return e.jsxs(e.Fragment,{children:[e.jsx("h1",{"data-testid":"register",children:"Register"}),e.jsxs("form",{onSubmit:s=>c(s),"aria-label":"Register",className:"custom-form",id:"register",children:[e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{name:"username",id:"username",onChange:s=>a(s),maxLength:150})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",name:"email",onChange:s=>a(s),maxLength:200})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"password",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",onChange:s=>a(s),maxLength:128}),e.jsx("button",{id:"toggle-visibility",type:"button",className:"icon-button",onClick:()=>x(!n),children:n?e.jsx(N,{}):e.jsx(C,{})})]})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"first_name",children:"First name (optional)"}),e.jsx("input",{id:"first_name",name:"first_name",onChange:s=>a(s),maxLength:50})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"last_name",children:"Last name (optional)"}),e.jsx("input",{id:"last_name",name:"last_name",onChange:s=>a(s),maxLength:50})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"about_me",children:"About me"}),e.jsx("textarea",{id:"about_me",name:"about_me",onChange:s=>a(s),maxLength:250})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"technical_info",children:"Technical Info"}),e.jsx("textarea",{id:"technical_info",name:"technical_info",onChange:s=>a(s),maxLength:150})]}),e.jsxs("div",{className:"item",id:"language-field",children:[e.jsx("label",{htmlFor:"language",children:"Language"}),e.jsx("input",{id:"language",name:"language",onChange:s=>a(s),maxLength:150})]}),e.jsx("button",{"data-testid":"save",id:"save",type:"submit",children:"Register"}),e.jsxs("p",{children:["Or"," ",e.jsx(b,{to:"/login",className:"accent-highlight",children:"login"})]})]}),e.jsx(F,{open:u,autoHideDuration:5e3,onClose:m,children:e.jsx(L,{onClose:m,severity:"error",variant:"filled",children:"Something went wrong!"})})]})}export{A as default};
