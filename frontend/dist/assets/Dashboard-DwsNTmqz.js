import{r as c,j as s,s as d,D as f,a as b,L as h,d as N,u as k,g as w,b as C,l as v}from"./index-BFq9amJe.js";import{E as D}from"./Edit-Dnn69iIN.js";function y({title:t,username:o,createdDate:n,content:a,editHelper:m,index:i,posts:e,setPosts:l}){const[x,r]=c.useState(!1);function j(){N(d(t)).then(p=>{if(p){const g=e.slice(0,i).concat(e.slice(i+1));l(g),r(!1)}r(!1)})}function u(){r(!1)}return s.jsxs("li",{className:"blog-post",children:[s.jsxs("div",{className:"edit-buttons",children:[" ",s.jsx("button",{onClick:()=>m(d(t)),children:s.jsx(D,{})}),s.jsx("button",{onClick:()=>r(!0),children:s.jsx(f,{})}),s.jsxs(b,{open:x,className:"delete-post-confirm",onClose:u,children:[s.jsx("h1",{children:"This will delete your post forever! Are you sure?"}),s.jsx("button",{onClick:()=>j(),className:"accent-border",children:"Yes, I am sure"}),s.jsx("button",{onClick:u,className:"tertiary-border",children:"No, I'm not"})]})]}),s.jsx(h,{to:"/post/"+o+"/"+d(t)+"/",children:s.jsx("h2",{children:t})}),s.jsxs("div",{className:"info",children:[s.jsx("p",{children:"By "+o}),s.jsx("p",{children:n.replace(/(T.*)/g,"")})]}),s.jsx("p",{className:"hint","data-testid":"post-content",children:a.length>100?a.slice(0,101)+"...":a})]})}function T(){const[t,o]=c.useState([]),[n,a]=c.useState([]),m=k();c.useEffect(()=>{w().then(e=>{o(e)}),C().then(e=>{a(e)})},[]);function i(e){m("/edit-post/"+e)}return s.jsxs("div",{id:"dashboard",children:[s.jsxs("section",{className:"flex-row-spacing vertical-margin-50",children:[s.jsx(h,{to:"/followers",className:"link-button",children:"View followers"}),s.jsx(h,{to:"/following",className:"link-button",children:"View following"})]}),s.jsxs("section",{className:"list-section",children:[s.jsx("h1",{children:"Your comments"}),s.jsx("ul",{className:"list",children:n===null||n.length===0?s.jsx("p",{role:"progressbar",children:"There's nothing here. Go make some comments!"}):n.map((e,l)=>s.jsx("li",{className:"comment",children:s.jsx(h,{to:"/post/"+e.post.user.username+"/"+d(e.post.title),"data-testid":"comment-content",children:v(e.content)})},l))})]}),s.jsxs("section",{className:"list-section",children:[" ",s.jsx("h1",{children:"Your posts"}),s.jsx("ul",{className:"list",children:t.length===null||t.length===0?s.jsx("p",{role:"progressbar",children:"There's nothing here. Go make some posts!"}):t.map((e,l)=>s.jsx(y,{title:e.title,username:e.user.username,createdDate:e.created_date,content:e.content,editHelper:i,posts:t,setPosts:o,index:l},l))})]})]})}export{T as default};
